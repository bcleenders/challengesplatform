= form_for @challenge, :url => @url, :html => {:multipart => true, :class => "challenge-form form-horizontal"}  do |f|
  - r1 = !@challenge.nil? && !@challenge.start_date.nil?
  - r2 = !@challenge.nil? && !@challenge.end_date.nil?
  %br/
  .row
    .span10.offset1
      - if @challenge.errors.any?
        #error_explanation.alert.alert-error
          %a.close{"data-dismiss" => "alert"} Ã—
          %p
            = pluralize(@challenge.errors.count, "error")
            prohibited this challenge from being saved:
          %ul
            - @challenge.errors.full_messages.each do |msg|
              %li= msg
      .control-group
        = f.label :title , "Name:", :class => "control-label"
        .controls
          = f.text_field :title, :placeholder => "Challenge name"
      .control-group
        = f.label :lead , "Pitch your challenge", :class => "control-label"
        .controls
          %small Why should people join your challenge? Keep it short and make it exciting :)!
          = f.text_area :lead, :class => "span8", :rows => "2", :placeholder => "Challenge lead..."
      .control-group
        = f.label :image , "", :class => "control-label"
        .controls
          - if @challenge.image.present?
            = image_tag @challenge.image.thumb.url, :class => "img-rounded"
          = f.hidden_field :image_cache
          = f.file_field :image, :title => "Select an image"
      .control-group
        = f.label :description , "Description", :class => "control-label"
        .controls
          = f.text_area :description, :class => "span8", :rows => "10", :placeholder => "Description..."
      .control-group
        = f.label :start_date , "Dates", :class => "control-label"
        .controls
          - if r1
            = f.text_field :start_date, :value => @challenge.start_date.strftime("%d-%m-%Y")
          - else
            = f.text_field :start_date
          till
          - if r2
            = f.text_field :end_date, :value => @challenge.end_date.strftime("%d-%m-%Y")
          - else
            = f.text_field :end_date
      .control-group
        = f.label :location , "Location", :class => "control-label"
        .controls
          = f.text_field :location, :placeholder => "Challenge location... "
          %small (Leave blank if undecided)
      .control-group
        = f.label :commitment , "Commitment", :class => "control-label"
        .controls
          = f.text_field :commitment, :placeholder => "Challenge commitment... "
          %small (Hours/week)
      .control-group
        .controls
          = f.submit 'Save draft', :class => "btn"
          = f.submit 'Submit for Review', :class => "btn btn-primary", :confirm => "You are submitting your challenge for review, continue?"

:javascript
  setDateControl($('#challenge_start_date'), $('#challenge_end_date'));
